## **1. `index.html`**

Essentially, `index.html` is a skeleton that mounts the application into `#app` and includes the external resources needed (fonts, CSS, JS).

---

## **2. `src/style.css`**

- Serves as a central hub that imports three separate CSS files:
  1. **`variables.css`** – all the custom properties (CSS variables).
  2. **`base.css`** – global resets and standard base styles.
  3. **`app.css`** – custom styles for the actual game UI.

---

## **3. `src/css/variables.css`**

- Declares the CSS variables for color styling throughout the application.
- **Hue, saturation, lightness, alpha** are used to generate multiple **shades** (from `--primary-color-shade-1` through `--primary-color-shade-9`).
- **`--font-family`** is also declared here.

These variables allow for easy theming or color changes by altering a few lines.

---

## **4. `src/css/base.css`**

- Global CSS reset: sets `margin`, `padding` to zero, uses `box-sizing: border-box`.
- Applies **global style**:
  - **Background color**: `--primary-color-shade-9`.
  - **Text color**: `--primary-color-shade-1`.
  - **Font family**: from `variables.css`.
- Additional HTML & body style rules ensure the layout is centered and flexible.

---

## **5. `src/css/app.css`**

- **`.app-container`** styles the main container: sets width, margin, padding, background, etc.
- **`.color-button`**: each circular color button for user selection.
- **`.slot`**: placeholders for the user’s picks.
- **`.actions-container`**: holds action buttons (here, just “Submit Guess”).
- A “disabled” style class is provided for the submit button once the game is over.

---

## **6. `src/main.js`**

- The **entry point** for the entire app.
- Imports `waitForLoadingOfDomContent` from `listeners.js`.
- **Calls** `waitForLoadingOfDomContent()`, which effectively waits for the `DOMContentLoaded` event before initializing the rest of the UI and logic.

---

## **7. `src/javascript/events/listeners.js`**

1. **`waitForLoadingOfDomContent()`**:

   - Attaches a `DOMContentLoaded` listener to the `document`.
   - **Callback**: `handleLoadingOfDomContent` (from `handlers.js`).

2. **`waitForClickOnColorButtons()`**:

   - Grabs all elements with `.color-button`.
   - For each, adds a `click` event listener that triggers `handleClickOnColorButtons(button)`.

3. **`waitForClickOnSubmitButton()`**:
   - Attaches a `click` event to the “Submit Guess” button.
   - **Callback**: `handleClickOnSubmitButton()`.

Essentially, these functions register event listeners needed for the game: load, button clicks, etc.

---

## **8. `src/javascript/events/handlers.js`**

- **`handleLoadingOfDomContent()`**:

  1. **`displayApp()`**: Injects the app’s HTML structure into `#app`.
  2. **`resetAppState()`**: Resets global variables (attempts, colors, etc.).
  3. Registers event listeners for color buttons and the submit button.

- **`handleClickOnColorButtons(button)`**:

  - Calls `updateSlotUI(button)` which updates the UI and internal state with the selected color.

- **`handleClickOnSubmitButton()`**:
  1. Checks if 4 colors have been selected:
     - If **not** valid: calls `reportIssueIfInvalidAttempt()` and **returns**.
  2. Increments `attempts_number`.
  3. Checks for **win**: calls `reportVictory()` and then `disableSubmitButton()`.
  4. Checks for **loss**: calls `reportLoss()` and then `disableSubmitButton()`.
  5. Otherwise, calls `reportIncorrectGuess()` and resets slots for the next guess (`resetSlotsForNextGuess()`).

This is the main control flow of the game’s logic once the UI is set up.

---

## **9. `src/javascript/document/manipulation.js`**

- **`displayApp()`**:
  - Injects the HTML generated by `generateApp()` into `#app`.
- **`updateSlotUI(button)`**:
  - Makes sure the player hasn’t already chosen 4 colors.
  - Adds the chosen color to `globalVariables.colors_array`.
  - Updates the visual slot background color.
  - Increments the slot index.
- **`reportIssueIfInvalidAttempt()`**: Displays an error message if the user tries to submit fewer than 4 colors.
- **`reportVictory()`**: Sets the `#message` text to the winning state.
- **`reportLoss()`**: Sets the `#message` text to the losing state.
- **`reportIncorrectGuess()`**: Shows the number of attempts remaining.
- **`resetSlotsForNextGuess()`**:
  - Clears the player’s chosen colors with `resetColorsArray()`.
  - Resets all `.slot` backgrounds.
  - Resets `current_slot_index`.
- **`disableSubmitButton()`**: Prevents further guesses by disabling the button, adding a “disabled-button” class, and changing its text to “Game Over”.

---

## **10. `src/javascript/components/functional.js`**

- **`generateColorButtons()`**:

  - Iterates over `globalVariables.possible_colors_list` to create a set of clickable button elements, each with a background color matching its color data.

- **`generateSlots()`**:

  - Dynamically creates 4 empty `.slot` divs to hold the user’s guess.

- **`generateApp()`**:
  - Composes the HTML for the entire Mastermind board:
    1. Title and instructions.
    2. Container of color buttons.
    3. Slots for guesses.
    4. “Submit Guess” button.
    5. Message area.

---

## **11. `src/javascript/state/management.js`**

- **`globalVariables`** object:

  - **`secret_code`**: The combination to guess (example: `["blue", "blue", "yellow", "green"]`).
  - **`attempts_number`**: Tracks how many guesses the user has made.
  - **`attempts_number_max`**: Maximum allowed guesses (12).
  - **`colors_array`**: Tracks the user’s current guess.
  - **`possible_colors_list`**: The color palette the user can select from.
  - **`current_slot_index`**: Points to which slot will be filled next.

- **`resetAppState()`**:
  - Resets `attempts_number` to **0**.
  - Calls `resetColorsArray()` to clear the chosen colors.

This is effectively the game’s “single source of truth” for game-wide data.

---

## **12. `src/javascript/helpers/utilities.js`**

- **`resetColorsArray()`**: Clears the user’s temporary guess array.
- **`addChosenColorToColorsArray(color)`**: Pushes the selected color.
- **`checkIfColorsArrayIsValid()`**: Returns `true` if the user has selected exactly 4 colors.
- **`checkIfColorsArrayIsStrictlyEqualsToSecretCode()`**: Compares each of the 4 colors in the guess to the `secret_code`.
- **`hasPlayerWon()`**: Returns `true` if the current guess equals the `secret_code`.
- **`hasPlayerLost()`**: Returns `true` if the number of attempts used up equals `attempts_number_max`.

This module encapsulates the core logic and utility functions used elsewhere.

---

## **Putting It All Together**

1. **Page load** (`index.html` + `main.js`):

   - Once the HTML finishes loading, `waitForLoadingOfDomContent()` (from `listeners.js`) is called.
   - That triggers `handleLoadingOfDomContent()` (from `handlers.js`).

2. **Initialization** (`handleLoadingOfDomContent()`):

   - **`displayApp()`** is called to insert the game’s HTML structure into `#app`.
   - **`resetAppState()`** resets `globalVariables`.
   - Listeners are attached for:
     - Clicking on any color button (`waitForClickOnColorButtons()`).
     - Clicking on “Submit Guess” (`waitForClickOnSubmitButton()`).

3. **Gameplay**:

   - **Color selection**: When a user clicks on a `.color-button`, `handleClickOnColorButtons(button)` is invoked, which then calls `updateSlotUI(button)`:
     - Updates the background color of the next available slot.
     - Stores that color in `globalVariables.colors_array`.
   - **Submitting guess**: When the user clicks “Submit Guess”:
     1. `handleClickOnSubmitButton()` checks if the guess has exactly 4 colors (`checkIfColorsArrayIsValid()`).
     2. If invalid, displays a message.
     3. If valid, increments `attempts_number`.
     4. Checks if the guess is correct (`hasPlayerWon()`): if yes, displays victory message and disables the button.
     5. Checks if the user is out of attempts (`hasPlayerLost()`): if yes, displays losing message and disables the button.
     6. Otherwise, shows “Incorrect guess…” message, resets the guess slots, and the cycle continues.

4. **Ending conditions**:
   - **Win**: The guess fully matches `secret_code`.
   - **Loss**: `attempts_number` reaches `attempts_number_max`.
   - In both cases, the submit button is disabled to prevent further guesses.

---

## **Key Observations**

- The code is well-organized in a typical modular ES6 style:
  - **State** is separated (`management.js`).
  - **DOM manipulation** has its own file (`manipulation.js`).
  - **Event listeners** and **handlers** are separated (`listeners.js` vs. `handlers.js`).
  - **Core logic**/utilities exist in `utilities.js`.
  - **UI generation** is done in `components/functional.js`.
- The main logic for validating guesses is straightforward: each guess must have 4 colors, and each color must exactly match the secret code in order and color to be a winning guess.
- The user interface (UI) is dynamic and is fully driven by JavaScript; the HTML is generated and injected at runtime.
- The code is highly maintainable because each concern is isolated into its own module:
  - State management is clearly separate from UI manipulation.
  - Logic is abstracted away into helper functions, which can be tested independently.

Overall, this structure makes the code easy to read, modify, and extend. It’s a solid example of a small but organized application structure in JavaScript.
